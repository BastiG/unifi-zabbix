<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.2</version>
    <date>2020-11-15T16:58:25Z</date>
    <groups>
        <group>
            <name>Templates</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template UniFi DreamMachine</template>
            <name>Template UniFi DreamMachine</name>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Clients</name>
                </application>
                <application>
                    <name>Interfaces</name>
                </application>
                <application>
                    <name>Speedtest</name>
                </application>
                <application>
                    <name>System Information</name>
                </application>
                <application>
                    <name>System Performance</name>
                </application>
                <application>
                    <name>Temperature</name>
                </application>
                <application>
                    <name>Zabbix raw items</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>CPU utilization</name>
                    <type>DEPENDENT</type>
                    <key>udm.cpu.utilization</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>System Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_cpu_utilization_ratio' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>100</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Firmware version</name>
                    <type>DEPENDENT</type>
                    <key>udm.device.firmware</key>
                    <delay>0</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>OS_SHORT</inventory_link>
                    <applications>
                        <application>
                            <name>System Information</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_info' &amp;&amp; @.labels.name == '{$UDM.NAME}')].labels.version.first()</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Serial number</name>
                    <type>DEPENDENT</type>
                    <key>udm.device.serial</key>
                    <delay>0</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>SERIALNO_A</inventory_link>
                    <applications>
                        <application>
                            <name>System Information</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_info' &amp;&amp; @.labels.name == '{$UDM.NAME}')].labels.serial.first()</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>UDM HTTP metrics collector</name>
                    <type>HTTP_AGENT</type>
                    <key>udm.master</key>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>Zabbix raw items</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_TO_JSON</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>10s</timeout>
                    <url>{$UDM.EXPORTER_URL}</url>
                </item>
                <item>
                    <name>Total memory</name>
                    <type>DEPENDENT</type>
                    <key>udm.memory.total</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <value_type>FLOAT</value_type>
                    <units>B</units>
                    <applications>
                        <application>
                            <name>System Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_memory_installed_bytes' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>1d</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Memory used</name>
                    <type>DEPENDENT</type>
                    <key>udm.memory.used</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <value_type>FLOAT</value_type>
                    <units>B</units>
                    <applications>
                        <application>
                            <name>System Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_memory_used_bytes' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Memory utilization</name>
                    <type>DEPENDENT</type>
                    <key>udm.memory.utilization</key>
                    <delay>0</delay>
                    <history>1w</history>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>System Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_memory_utilization_ratio' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>MULTIPLIER</type>
                            <parameters>
                                <parameter>100</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Speedtest run date</name>
                    <type>DEPENDENT</type>
                    <key>udm.speedtest.date</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>unixtime</units>
                    <applications>
                        <application>
                            <name>Speedtest</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_speedtest_rundate_seconds' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Speedtest download rate</name>
                    <type>DEPENDENT</type>
                    <key>udm.speedtest.download</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>Mbps</units>
                    <applications>
                        <application>
                            <name>Speedtest</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_speedtest_download' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Speedtest latency</name>
                    <type>DEPENDENT</type>
                    <key>udm.speedtest.latency</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>s</units>
                    <applications>
                        <application>
                            <name>Speedtest</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_speedtest_latency_seconds' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Speedtest run time</name>
                    <type>DEPENDENT</type>
                    <key>udm.speedtest.time</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>s</units>
                    <applications>
                        <application>
                            <name>Speedtest</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_speedtest_runtime_seconds' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                            <parameters>
                                <parameter>24</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
                <item>
                    <name>Speedtest upload rate</name>
                    <type>DEPENDENT</type>
                    <key>udm.speedtest.upload</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>Mbps</units>
                    <applications>
                        <application>
                            <name>Speedtest</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_speedtest_upload' &amp;&amp; @.labels.name == '{$UDM.NAME}')].value.first()</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>DISCARD_UNCHANGED</type>
                            <parameters>
                                <parameter/>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Connected clients</name>
                    <type>DEPENDENT</type>
                    <key>udm.clients</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>Connected {#UDM.CLIENT.TYPE} clients</name>
                            <type>DEPENDENT</type>
                            <key>udm.clients[{#UDM.CLIENT.TYPE}]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <applications>
                                <application>
                                    <name>Clients</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_stations' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.station_type == '{#UDM.CLIENT.TYPE}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#UDM.CLIENT.TYPE}</lld_macro>
                            <path>$.labels.station_type</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_stations' &amp;&amp; @.labels.name == '{$UDM.NAME}')]</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Interfaces</name>
                    <type>DEPENDENT</type>
                    <key>udm.interfaces</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} receive drops</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},rx_drop]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_receive_dropped_total' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} receive errors</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},rx_error]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_receive_errors_total' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} receive packet rate</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},rx_packets]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <units>pps</units>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_receive_packets_total' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} receive rate</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},rx_rate]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <units>Bps</units>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_receive_bytes_total' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} port speed</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},speed]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>bps</units>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_port_speed_bps' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>DISCARD_UNCHANGED_HEARTBEAT</type>
                                    <parameters>
                                        <parameter>1h</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} transmit drops</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},tx_drop]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_transmit_dropped_total' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} transmit errors</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},tx_error]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_transmit_errors_total' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>SIMPLE_CHANGE</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} trasmit packet rate</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},tx_packets]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <units>pps</units>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_transmit_packets_total' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>{#UDM.INTERFACE.NAME} transmit rate</name>
                            <type>DEPENDENT</type>
                            <key>udm.interfaces[{#UDM.INTERFACE.ID},tx_rate]</key>
                            <delay>0</delay>
                            <history>1w</history>
                            <value_type>FLOAT</value_type>
                            <units>Bps</units>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_port_transmit_bytes_total' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.port_id == '{#UDM.INTERFACE.ID}')].value.first()</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>CHANGE_PER_SECOND</type>
                                    <parameters>
                                        <parameter/>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>{#UDM.INTERFACE.NAME} packets</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>81C784</color>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},rx_packets]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>E6EE9C</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},rx_drop]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <color>FFB74D</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},rx_error]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>4</sortorder>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},tx_packets]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>5</sortorder>
                                    <color>9575CD</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},tx_drop]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>6</sortorder>
                                    <color>EF5350</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},tx_error]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>{#UDM.INTERFACE.NAME} utilization</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>FF4000</color>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},speed]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>81C784</color>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},rx_rate]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Template UniFi DreamMachine</host>
                                        <key>udm.interfaces[{#UDM.INTERFACE.ID},tx_rate]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#SITE}</lld_macro>
                            <path>$.labels.site_name</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#UDM.INTERFACE.ID}</lld_macro>
                            <path>$.labels.port_id</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#UDM.INTERFACE.NAME}</lld_macro>
                            <path>$.labels.port_name</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_port_port_speed_bps' &amp;&amp; @.labels.name == '{$UDM.NAME}')]</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Temperatures</name>
                    <type>DEPENDENT</type>
                    <key>udm.temperatures</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>Temperature {#UDM.TEMPERATURE.AREA}</name>
                            <type>DEPENDENT</type>
                            <key>udm.temperatures[{#UDM.TEMPERATURE.AREA}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>°C</units>
                            <applications>
                                <application>
                                    <name>Temperature</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$[?(@.name == 'unifipoller_device_temperature_celsius' &amp;&amp; @.labels.name == '{$UDM.NAME}' &amp;&amp; @.labels.temp_area == '{#UDM.TEMPERATURE.AREA}')].value.first()</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>udm.master</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>udm.master</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#UDM.TEMPERATURE.AREA}</lld_macro>
                            <path>$.labels.temp_area</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$[?(@.name == 'unifipoller_device_temperature_celsius' &amp;&amp; @.labels.name == '{$UDM.NAME}')]</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$UDM.EXPORTER_URL}</macro>
                    <value>http://127.0.0.1:9130/metrics</value>
                    <description>The URL of the Prometheus poller</description>
                </macro>
                <macro>
                    <macro>{$UDM.NAME}</macro>
                    <value>&lt;enter name&gt;</value>
                    <description>The name of your Unifi DreamMachine as it appears in the prometheus output</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
